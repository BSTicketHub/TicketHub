@model IEnumerable<TicketHubApp.PlatformViewModels.ShopViewModel>

@{
    ViewBag.Title = "Index";
}
<div>
    <h2 class="my-5">後台管理系統 / 商家管理 / 商家列表</h2>
    <form action="SearchByShopName" method="post">
        <select>
            <option value="ShopName" title="請輸入商家名稱" class="SearchByShopName">依照商家名稱</option>
            <option value="Phone" title="請輸入商家電話" class="SearchByPhone">依照商家電話</option>
            <option value="Fax" title="請輸入商家傳真號碼" class="SearchByFax">依照商家傳真號碼</option>
            <option value="Website" title="請輸入商家網址" class="SearchByWebsite">依照商家網站</option>
        </select>

        <label for="Search">搜尋商家</label>
        <input type="text" name="ShopName" value="" id="Search" placeholder="請輸入商家名稱" />
        <input type="submit" value="搜尋" />
    </form>
</div>


<table class="table table-striped table-hover col-md-12">
    <thead>
        <tr class="row">
            <th class="col-md-2">
                @Html.DisplayNameFor(model => model.Id)
            </th>
            <th class="col-md-1">
                @Html.DisplayNameFor(model => model.ShopName)
            </th>
            <th class="col-md-1">
                @Html.DisplayNameFor(model => model.Phone)
            </th>
            <th class="col-md-1">
                @Html.DisplayNameFor(model => model.Fax)
            </th>
            <th class="col-md-2">
                @Html.DisplayNameFor(model => model.Address)
            </th>
            <th class="col-md-1">
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th class="col-md-1">
                @Html.DisplayNameFor(model => model.Website)
            </th>
            <th class="col-md-3">
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr class="row" onclick="goToDetail('@item.Id')">
                <td class="col-md-2 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Id)
                </td>
                <td class="col-md-1 overflow-auto">
                    @Html.DisplayFor(modelItem => item.ShopName)
                </td>
                <td class="col-md-1 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Phone)
                </td>
                <td class="col-md-1 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Fax)
                </td>
                <td class="col-md-2 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
                <td class="col-md-1 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td class="col-md-1 overflow-auto">
                    @Html.DisplayFor(modelItem => item.Website)
                </td>
                <td class="link col-md-3">
                    <a href="~/ShopViewModels/Edit/@item.Id"><span class="iconify" data-icon="ic:baseline-edit" data-inline="false"></span></a>
                    <a href="~/ShopViewModels/Details/@item.Id"><span class="iconify" data-icon="ic:round-store" data-inline="false"></span></a>
                    <a href="~/ShopViewModels/Delete/@item.Id"><span class="iconify" data-icon="uil:store-slash" data-inline="false"></span></a>
                </td>
            </tr>
        }
    </tbody>
</table>
<p>
    <a href="~/ShopViewModels/Create" class="btn btn-outline-success"><span class="iconify" data-icon="ic:outline-add-business" data-inline="false"></span>  新增商家</a>
</p>
@section endCSS{
    <style>
        table tbody .link a {
            transition: 0.5s;
            color: black !important;
            padding: 10px 15px;
            background-color: white;
            border-radius: 10px;
        }

            table tbody .link a:hover {
                background-color: #26BEC9;
            }

                table tbody .link a:hover svg {
                    color: white;
                }
    </style>
}

@section endJS{
    <script>
        function goToDetail(id) {
            window.location.assign("Details/" + id);
        }

        // 下拉式選單 change 事件
        let select = document.querySelector('select');

        select.addEventListener('change', function () {
            console.log(this.options[this.selectedIndex].value);
            document.querySelector('#Search').name = this.options[this.selectedIndex].value;
            console.log(this.options[this.selectedIndex].class);
            document.querySelector('#Search').placeholder = this.options[this.selectedIndex].title;
            document.querySelector('form').action = this.options[this.selectedIndex].className;
        });
    </script>
}